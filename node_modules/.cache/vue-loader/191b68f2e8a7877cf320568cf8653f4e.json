{"remainingRequest":"/home/dimas/Dev/d3ja-vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/dimas/Dev/d3ja-vue/src/lib-components/TreeOfLife.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/dimas/Dev/d3ja-vue/src/lib-components/TreeOfLife.vue","mtime":1623728146838},{"path":"/home/dimas/Dev/d3ja-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/dimas/Dev/d3ja-vue/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/dimas/Dev/d3ja-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/dimas/Dev/d3ja-vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KCmltcG9ydCAqIGFzIGQzIGZyb20gJ2QzJwoKZnVuY3Rpb24gbGlua1N0ZXAoc3RhcnRBbmdsZSwgc3RhcnRSYWRpdXMsIGVuZEFuZ2xlLCBlbmRSYWRpdXMpIHsKICBjb25zdCBjMCA9IE1hdGguY29zKChzdGFydEFuZ2xlID0gKChzdGFydEFuZ2xlIC0gOTApIC8gMTgwKSAqIE1hdGguUEkpKQogIGNvbnN0IHMwID0gTWF0aC5zaW4oc3RhcnRBbmdsZSkKICBjb25zdCBjMSA9IE1hdGguY29zKChlbmRBbmdsZSA9ICgoZW5kQW5nbGUgLSA5MCkgLyAxODApICogTWF0aC5QSSkpCiAgY29uc3QgczEgPSBNYXRoLnNpbihlbmRBbmdsZSkKICByZXR1cm4gKAogICAgJ00nICsKICAgIHN0YXJ0UmFkaXVzICogYzAgKwogICAgJywnICsKICAgIHN0YXJ0UmFkaXVzICogczAgKwogICAgKGVuZEFuZ2xlID09PSBzdGFydEFuZ2xlCiAgICAgID8gJycKICAgICAgOiAnQScgKwogICAgICAgIHN0YXJ0UmFkaXVzICsKICAgICAgICAnLCcgKwogICAgICAgIHN0YXJ0UmFkaXVzICsKICAgICAgICAnIDAgMCAnICsKICAgICAgICAoZW5kQW5nbGUgPiBzdGFydEFuZ2xlID8gMSA6IDApICsKICAgICAgICAnICcgKwogICAgICAgIHN0YXJ0UmFkaXVzICogYzEgKwogICAgICAgICcsJyArCiAgICAgICAgc3RhcnRSYWRpdXMgKiBzMSkgKwogICAgJ0wnICsKICAgIGVuZFJhZGl1cyAqIGMxICsKICAgICcsJyArCiAgICBlbmRSYWRpdXMgKiBzMQogICkKfQoKZnVuY3Rpb24gbGlua0V4dGVuc2lvbkNvbnN0YW50KGQpIHsKICByZXR1cm4gbGlua1N0ZXAoZC50YXJnZXQueCwgZC50YXJnZXQueSwgZC50YXJnZXQueCwgdGhpcy5pbm5lclJhZGl1cykKfQoKZnVuY3Rpb24gbGlua0V4dGVuc2lvblZhcmlhYmxlKGQpIHsKICByZXR1cm4gbGlua1N0ZXAoZC50YXJnZXQueCwgZC50YXJnZXQucmFkaXVzLCBkLnRhcmdldC54LCB0aGlzLmlubmVyUmFkaXVzKQp9CgpmdW5jdGlvbiBsaW5rQ29uc3RhbnQoZCkgewogIHJldHVybiBsaW5rU3RlcChkLnNvdXJjZS54LCBkLnNvdXJjZS55LCBkLnRhcmdldC54LCBkLnRhcmdldC55KQp9CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1RyZWVPZkxpZmUnLAogIHByb3BzOiB7CiAgICB0cmVlOiBTdHJpbmcKICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmdldENoYXJ0KCkKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB3aWR0aDogOTAwCiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgb3V0ZXJSYWRpdXMoKSB7CiAgICAgIHJldHVybiB0aGlzLndpZHRoIC8gMgogICAgfSwKICAgIGlubmVyUmFkaXVzKCkgewogICAgICByZXR1cm4gdGhpcy5vdXRlclJhZGl1cyAtIDE3MAogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgcGFyc2VOZXdpY2soYSkgewogICAgICBmb3IgKAogICAgICAgIHZhciBlID0gW10sIHIgPSB7fSwgcyA9IGEuc3BsaXQoL1xzKig7fFwofFwpfCx8OilccyovKSwgdCA9IDA7CiAgICAgICAgdCA8IHMubGVuZ3RoOwogICAgICAgIHQrKwogICAgICApIHsKICAgICAgICB2YXIgbiA9IHNbdF0KICAgICAgICBzd2l0Y2ggKG4pIHsKICAgICAgICAgIGNhc2UgJygnOgogICAgICAgICAgICB2YXIgYyA9IHt9CiAgICAgICAgICAgIDsoci5icmFuY2hzZXQgPSBbY10pLCBlLnB1c2gociksIChyID0gYykKICAgICAgICAgICAgYnJlYWsKICAgICAgICAgIGNhc2UgJywnOgogICAgICAgICAgICB2YXIgYyA9IHt9CiAgICAgICAgICAgIGVbZS5sZW5ndGggLSAxXS5icmFuY2hzZXQucHVzaChjKSwgKHIgPSBjKQogICAgICAgICAgICBicmVhawogICAgICAgICAgY2FzZSAnKSc6CiAgICAgICAgICAgIHIgPSBlLnBvcCgpCiAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICBjYXNlICc6JzoKICAgICAgICAgICAgYnJlYWsKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIHZhciBoID0gc1t0IC0gMV0KICAgICAgICAgICAgJyknID09IGggfHwgJygnID09IGggfHwgJywnID09IGgKICAgICAgICAgICAgICA/IChyLm5hbWUgPSBuKQogICAgICAgICAgICAgIDogJzonID09IGggJiYgKHIubGVuZ3RoID0gcGFyc2VGbG9hdChuKSkKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIHIKICAgIH0sCiAgICBnZXRDaGFydCgpIHsKICAgICAgbGV0IGRhdGEgPSB0aGlzLnBhcnNlTmV3aWNrKHRoaXMudHJlZSkKICAgICAgbGV0IGxlZ2VuZCA9IChzdmcpID0+IHsKICAgICAgICBjb25zdCBnID0gc3ZnCiAgICAgICAgICAuc2VsZWN0QWxsKCdnJykKICAgICAgICAgIC5kYXRhKGNvbG9yLmRvbWFpbigpKQogICAgICAgICAgLmpvaW4oJ2cnKQogICAgICAgICAgLmF0dHIoCiAgICAgICAgICAgICd0cmFuc2Zvcm0nLAogICAgICAgICAgICAoZCwgaSkgPT4KICAgICAgICAgICAgICBgdHJhbnNsYXRlKCR7LXRoaXMub3V0ZXJSYWRpdXN9LCR7LXRoaXMub3V0ZXJSYWRpdXMgKyBpICogMjB9KWAKICAgICAgICAgICkKCiAgICAgICAgZy5hcHBlbmQoJ3JlY3QnKQogICAgICAgICAgLmF0dHIoJ3dpZHRoJywgMTgpCiAgICAgICAgICAuYXR0cignaGVpZ2h0JywgMTgpCiAgICAgICAgICAuYXR0cignZmlsbCcsIGNvbG9yKQoKICAgICAgICBnLmFwcGVuZCgndGV4dCcpCiAgICAgICAgICAuYXR0cigneCcsIDI0KQogICAgICAgICAgLmF0dHIoJ3knLCA5KQogICAgICAgICAgLmF0dHIoJ2R5JywgJzAuMzVlbScpCiAgICAgICAgICAudGV4dCgoZCkgPT4gZCkKICAgICAgfQoKICAgICAgZnVuY3Rpb24gbGlua1ZhcmlhYmxlKGQpIHsKICAgICAgICByZXR1cm4gbGlua1N0ZXAoCiAgICAgICAgICBkLnNvdXJjZS54LAogICAgICAgICAgZC5zb3VyY2UucmFkaXVzLAogICAgICAgICAgZC50YXJnZXQueCwKICAgICAgICAgIGQudGFyZ2V0LnJhZGl1cwogICAgICAgICkKICAgICAgfQoKICAgICAgLy8gU2V0IHRoZSBjb2xvciBvZiBlYWNoIG5vZGUgYnkgcmVjdXJzaXZlbHkgaW5oZXJpdGluZy4KICAgICAgZnVuY3Rpb24gc2V0Q29sb3IoZCkgewogICAgICAgIHZhciBuYW1lID0gZC5kYXRhLm5hbWUKICAgICAgICBkLmNvbG9yID0KICAgICAgICAgIGNvbG9yLmRvbWFpbigpLmluZGV4T2YobmFtZSkgPj0gMAogICAgICAgICAgICA/IGNvbG9yKG5hbWUpCiAgICAgICAgICAgIDogZC5wYXJlbnQKICAgICAgICAgICAgPyBkLnBhcmVudC5jb2xvcgogICAgICAgICAgICA6IG51bGwKICAgICAgICBpZiAoZC5jaGlsZHJlbikgZC5jaGlsZHJlbi5mb3JFYWNoKHNldENvbG9yKQogICAgICB9CgogICAgICAvLyBTZXQgdGhlIHJhZGl1cyBvZiBlYWNoIG5vZGUgYnkgcmVjdXJzaXZlbHkgc3VtbWluZyBhbmQgc2NhbGluZyB0aGUgZGlzdGFuY2UgZnJvbSB0aGUgcm9vdC4KICAgICAgZnVuY3Rpb24gc2V0UmFkaXVzKGQsIHkwLCBrKSB7CiAgICAgICAgZC5yYWRpdXMgPSAoeTAgKz0gZC5kYXRhLmxlbmd0aCkgKiBrCiAgICAgICAgaWYgKGQuY2hpbGRyZW4pIGQuY2hpbGRyZW4uZm9yRWFjaCgoZCkgPT4gc2V0UmFkaXVzKGQsIHkwLCBrKSkKICAgICAgfQoKICAgICAgLy8gQ29tcHV0ZSB0aGUgbWF4aW11bSBjdW11bGF0aXZlIGxlbmd0aCBvZiBhbnkgbm9kZSBpbiB0aGUgdHJlZS4KICAgICAgZnVuY3Rpb24gbWF4TGVuZ3RoKGQpIHsKICAgICAgICByZXR1cm4gZC5kYXRhLmxlbmd0aCArIChkLmNoaWxkcmVuID8gZDMubWF4KGQuY2hpbGRyZW4sIG1heExlbmd0aCkgOiAwKQogICAgICB9CgogICAgICBsZXQgY29sb3IgPSBkMwogICAgICAgIC5zY2FsZU9yZGluYWwoKQogICAgICAgIC5kb21haW4oWydCYWN0ZXJpYScsICdFdWthcnlvdGEnLCAnQXJjaGFlYSddKQogICAgICAgIC5yYW5nZShkMy5zY2hlbWVDYXRlZ29yeTEwKQoKICAgICAgbGV0IGNsdXN0ZXIgPSBkMwogICAgICAgIC5jbHVzdGVyKCkKICAgICAgICAuc2l6ZShbMzYwLCB0aGlzLmlubmVyUmFkaXVzXSkKICAgICAgICAuc2VwYXJhdGlvbigoYSwgYikgPT4gMSkKICAgICAgY29uc3Qgcm9vdCA9IGQzCiAgICAgICAgLmhpZXJhcmNoeShkYXRhLCAoZCkgPT4gZC5icmFuY2hzZXQpCiAgICAgICAgLnN1bSgoZCkgPT4gKGQuYnJhbmNoc2V0ID8gMCA6IDEpKQogICAgICAgIC5zb3J0KAogICAgICAgICAgKGEsIGIpID0+CiAgICAgICAgICAgIGEudmFsdWUgLSBiLnZhbHVlIHx8IGQzLmFzY2VuZGluZyhhLmRhdGEubGVuZ3RoLCBiLmRhdGEubGVuZ3RoKQogICAgICAgICkKCiAgICAgIGNsdXN0ZXIocm9vdCkKICAgICAgc2V0UmFkaXVzKAogICAgICAgIHJvb3QsCiAgICAgICAgKHJvb3QuZGF0YS5sZW5ndGggPSAwKSwKICAgICAgICB0aGlzLmlubmVyUmFkaXVzIC8gbWF4TGVuZ3RoKHJvb3QpCiAgICAgICkKICAgICAgc2V0Q29sb3Iocm9vdCkKCiAgICAgIGNvbnN0IHN2ZyA9IGQzCiAgICAgICAgLnNlbGVjdCgnLmNvbnRhaW5lcicpCiAgICAgICAgLmFwcGVuZCgnc3ZnJykKICAgICAgICAuYXR0cigndmlld0JveCcsIFsKICAgICAgICAgIC10aGlzLm91dGVyUmFkaXVzLAogICAgICAgICAgLXRoaXMub3V0ZXJSYWRpdXMsCiAgICAgICAgICB0aGlzLndpZHRoLAogICAgICAgICAgdGhpcy53aWR0aAogICAgICAgIF0pCiAgICAgICAgLmF0dHIoJ2ZvbnQtZmFtaWx5JywgJ3NhbnMtc2VyaWYnKQogICAgICAgIC5hdHRyKCdmb250LXNpemUnLCAxMCkKCiAgICAgIHN2Zy5hcHBlbmQoJ2cnKS5jYWxsKGxlZ2VuZCkKCiAgICAgIHN2Zy5hcHBlbmQoJ3N0eWxlJykudGV4dChgCgoubGluay0tYWN0aXZlIHsKICBzdHJva2U6ICMwMDAgIWltcG9ydGFudDsKICBzdHJva2Utd2lkdGg6IDEuNXB4Owp9CgoubGluay1leHRlbnNpb24tLWFjdGl2ZSB7CiAgc3Ryb2tlLW9wYWNpdHk6IC42Owp9CgoubGFiZWwtLWFjdGl2ZSB7CiAgZm9udC13ZWlnaHQ6IGJvbGQ7Cn0KCmApCgogICAgICBjb25zdCBsaW5rRXh0ZW5zaW9uID0gc3ZnCiAgICAgICAgLmFwcGVuZCgnZycpCiAgICAgICAgLmF0dHIoJ2ZpbGwnLCAnbm9uZScpCiAgICAgICAgLmF0dHIoJ3N0cm9rZScsICcjMDAwJykKICAgICAgICAuYXR0cignc3Ryb2tlLW9wYWNpdHknLCAwLjI1KQogICAgICAgIC5zZWxlY3RBbGwoJ3BhdGgnKQogICAgICAgIC5kYXRhKHJvb3QubGlua3MoKS5maWx0ZXIoKGQpID0+ICFkLnRhcmdldC5jaGlsZHJlbikpCiAgICAgICAgLmpvaW4oJ3BhdGgnKQogICAgICAgIC5lYWNoKGZ1bmN0aW9uKGQpIHsKICAgICAgICAgIGQudGFyZ2V0LmxpbmtFeHRlbnNpb25Ob2RlID0gdGhpcwogICAgICAgIH0pCiAgICAgICAgLmF0dHIoJ2QnLCBsaW5rRXh0ZW5zaW9uQ29uc3RhbnQpCgogICAgICBjb25zdCBsaW5rID0gc3ZnCiAgICAgICAgLmFwcGVuZCgnZycpCiAgICAgICAgLmF0dHIoJ2ZpbGwnLCAnbm9uZScpCiAgICAgICAgLmF0dHIoJ3N0cm9rZScsICcjMDAwJykKICAgICAgICAuc2VsZWN0QWxsKCdwYXRoJykKICAgICAgICAuZGF0YShyb290LmxpbmtzKCkpCiAgICAgICAgLmpvaW4oJ3BhdGgnKQogICAgICAgIC5lYWNoKGZ1bmN0aW9uKGQpIHsKICAgICAgICAgIGQudGFyZ2V0LmxpbmtOb2RlID0gdGhpcwogICAgICAgIH0pCiAgICAgICAgLmF0dHIoJ2QnLCBsaW5rQ29uc3RhbnQpCiAgICAgICAgLmF0dHIoJ3N0cm9rZScsIChkKSA9PiBkLnRhcmdldC5jb2xvcikKCiAgICAgIHN2ZwogICAgICAgIC5hcHBlbmQoJ2cnKQogICAgICAgIC5zZWxlY3RBbGwoJ3RleHQnKQogICAgICAgIC5kYXRhKHJvb3QubGVhdmVzKCkpCiAgICAgICAgLmpvaW4oJ3RleHQnKQogICAgICAgIC5hdHRyKCdkeScsICcuMzFlbScpCiAgICAgICAgLmF0dHIoCiAgICAgICAgICAndHJhbnNmb3JtJywKICAgICAgICAgIChkKSA9PgogICAgICAgICAgICBgcm90YXRlKCR7ZC54IC0gOTB9KSB0cmFuc2xhdGUoJHt0aGlzLmlubmVyUmFkaXVzICsgNH0sMCkkewogICAgICAgICAgICAgIGQueCA8IDE4MCA/ICcnIDogJyByb3RhdGUoMTgwKScKICAgICAgICAgICAgfWAKICAgICAgICApCiAgICAgICAgLmF0dHIoJ3RleHQtYW5jaG9yJywgKGQpID0+IChkLnggPCAxODAgPyAnc3RhcnQnIDogJ2VuZCcpKQogICAgICAgIC50ZXh0KChkKSA9PiBkLmRhdGEubmFtZS5yZXBsYWNlKC9fL2csICcgJykpCiAgICAgICAgLm9uKCdtb3VzZW92ZXInLCBtb3VzZW92ZXJlZCh0cnVlKSkKICAgICAgICAub24oJ21vdXNlb3V0JywgbW91c2VvdmVyZWQoZmFsc2UpKQoKICAgICAgZnVuY3Rpb24gdXBkYXRlKGNoZWNrZWQpIHsKICAgICAgICBjb25zdCB0ID0gZDMudHJhbnNpdGlvbigpLmR1cmF0aW9uKDc1MCkKICAgICAgICBsaW5rRXh0ZW5zaW9uCiAgICAgICAgICAudHJhbnNpdGlvbih0KQogICAgICAgICAgLmF0dHIoJ2QnLCBjaGVja2VkID8gbGlua0V4dGVuc2lvblZhcmlhYmxlIDogbGlua0V4dGVuc2lvbkNvbnN0YW50KQogICAgICAgIGxpbmsudHJhbnNpdGlvbih0KS5hdHRyKCdkJywgY2hlY2tlZCA/IGxpbmtWYXJpYWJsZSA6IGxpbmtDb25zdGFudCkKICAgICAgfQoKICAgICAgZnVuY3Rpb24gbW91c2VvdmVyZWQoYWN0aXZlKSB7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGV2ZW50LCBkKSB7CiAgICAgICAgICBkMy5zZWxlY3QodGhpcykuY2xhc3NlZCgnbGFiZWwtLWFjdGl2ZScsIGFjdGl2ZSkKICAgICAgICAgIGQzLnNlbGVjdChkLmxpbmtFeHRlbnNpb25Ob2RlKQogICAgICAgICAgICAuY2xhc3NlZCgnbGluay1leHRlbnNpb24tLWFjdGl2ZScsIGFjdGl2ZSkKICAgICAgICAgICAgLnJhaXNlKCkKICAgICAgICAgIGRvCiAgICAgICAgICAgIGQzLnNlbGVjdChkLmxpbmtOb2RlKQogICAgICAgICAgICAgIC5jbGFzc2VkKCdsaW5rLS1hY3RpdmUnLCBhY3RpdmUpCiAgICAgICAgICAgICAgLnJhaXNlKCkKICAgICAgICAgIHdoaWxlICgoZCA9IGQucGFyZW50KSkKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHN2Zy5ub2RlKCksIHsgdXBkYXRlIH0pCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["TreeOfLife.vue"],"names":[],"mappings":";;;;;AAKA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"TreeOfLife.vue","sourceRoot":"src/lib-components","sourcesContent":["<template>\n  <div class=\"container\"></div>\n</template>\n\n<script>\nimport * as d3 from 'd3'\n\nfunction linkStep(startAngle, startRadius, endAngle, endRadius) {\n  const c0 = Math.cos((startAngle = ((startAngle - 90) / 180) * Math.PI))\n  const s0 = Math.sin(startAngle)\n  const c1 = Math.cos((endAngle = ((endAngle - 90) / 180) * Math.PI))\n  const s1 = Math.sin(endAngle)\n  return (\n    'M' +\n    startRadius * c0 +\n    ',' +\n    startRadius * s0 +\n    (endAngle === startAngle\n      ? ''\n      : 'A' +\n        startRadius +\n        ',' +\n        startRadius +\n        ' 0 0 ' +\n        (endAngle > startAngle ? 1 : 0) +\n        ' ' +\n        startRadius * c1 +\n        ',' +\n        startRadius * s1) +\n    'L' +\n    endRadius * c1 +\n    ',' +\n    endRadius * s1\n  )\n}\n\nfunction linkExtensionConstant(d) {\n  return linkStep(d.target.x, d.target.y, d.target.x, this.innerRadius)\n}\n\nfunction linkExtensionVariable(d) {\n  return linkStep(d.target.x, d.target.radius, d.target.x, this.innerRadius)\n}\n\nfunction linkConstant(d) {\n  return linkStep(d.source.x, d.source.y, d.target.x, d.target.y)\n}\n\nexport default {\n  name: 'TreeOfLife',\n  props: {\n    tree: String\n  },\n  mounted() {\n    this.getChart()\n  },\n  data() {\n    return {\n      width: 900\n    }\n  },\n  computed: {\n    outerRadius() {\n      return this.width / 2\n    },\n    innerRadius() {\n      return this.outerRadius - 170\n    }\n  },\n  methods: {\n    parseNewick(a) {\n      for (\n        var e = [], r = {}, s = a.split(/\\s*(;|\\(|\\)|,|:)\\s*/), t = 0;\n        t < s.length;\n        t++\n      ) {\n        var n = s[t]\n        switch (n) {\n          case '(':\n            var c = {}\n            ;(r.branchset = [c]), e.push(r), (r = c)\n            break\n          case ',':\n            var c = {}\n            e[e.length - 1].branchset.push(c), (r = c)\n            break\n          case ')':\n            r = e.pop()\n            break\n          case ':':\n            break\n          default:\n            var h = s[t - 1]\n            ')' == h || '(' == h || ',' == h\n              ? (r.name = n)\n              : ':' == h && (r.length = parseFloat(n))\n        }\n      }\n      return r\n    },\n    getChart() {\n      let data = this.parseNewick(this.tree)\n      let legend = (svg) => {\n        const g = svg\n          .selectAll('g')\n          .data(color.domain())\n          .join('g')\n          .attr(\n            'transform',\n            (d, i) =>\n              `translate(${-this.outerRadius},${-this.outerRadius + i * 20})`\n          )\n\n        g.append('rect')\n          .attr('width', 18)\n          .attr('height', 18)\n          .attr('fill', color)\n\n        g.append('text')\n          .attr('x', 24)\n          .attr('y', 9)\n          .attr('dy', '0.35em')\n          .text((d) => d)\n      }\n\n      function linkVariable(d) {\n        return linkStep(\n          d.source.x,\n          d.source.radius,\n          d.target.x,\n          d.target.radius\n        )\n      }\n\n      // Set the color of each node by recursively inheriting.\n      function setColor(d) {\n        var name = d.data.name\n        d.color =\n          color.domain().indexOf(name) >= 0\n            ? color(name)\n            : d.parent\n            ? d.parent.color\n            : null\n        if (d.children) d.children.forEach(setColor)\n      }\n\n      // Set the radius of each node by recursively summing and scaling the distance from the root.\n      function setRadius(d, y0, k) {\n        d.radius = (y0 += d.data.length) * k\n        if (d.children) d.children.forEach((d) => setRadius(d, y0, k))\n      }\n\n      // Compute the maximum cumulative length of any node in the tree.\n      function maxLength(d) {\n        return d.data.length + (d.children ? d3.max(d.children, maxLength) : 0)\n      }\n\n      let color = d3\n        .scaleOrdinal()\n        .domain(['Bacteria', 'Eukaryota', 'Archaea'])\n        .range(d3.schemeCategory10)\n\n      let cluster = d3\n        .cluster()\n        .size([360, this.innerRadius])\n        .separation((a, b) => 1)\n      const root = d3\n        .hierarchy(data, (d) => d.branchset)\n        .sum((d) => (d.branchset ? 0 : 1))\n        .sort(\n          (a, b) =>\n            a.value - b.value || d3.ascending(a.data.length, b.data.length)\n        )\n\n      cluster(root)\n      setRadius(\n        root,\n        (root.data.length = 0),\n        this.innerRadius / maxLength(root)\n      )\n      setColor(root)\n\n      const svg = d3\n        .select('.container')\n        .append('svg')\n        .attr('viewBox', [\n          -this.outerRadius,\n          -this.outerRadius,\n          this.width,\n          this.width\n        ])\n        .attr('font-family', 'sans-serif')\n        .attr('font-size', 10)\n\n      svg.append('g').call(legend)\n\n      svg.append('style').text(`\n\n.link--active {\n  stroke: #000 !important;\n  stroke-width: 1.5px;\n}\n\n.link-extension--active {\n  stroke-opacity: .6;\n}\n\n.label--active {\n  font-weight: bold;\n}\n\n`)\n\n      const linkExtension = svg\n        .append('g')\n        .attr('fill', 'none')\n        .attr('stroke', '#000')\n        .attr('stroke-opacity', 0.25)\n        .selectAll('path')\n        .data(root.links().filter((d) => !d.target.children))\n        .join('path')\n        .each(function(d) {\n          d.target.linkExtensionNode = this\n        })\n        .attr('d', linkExtensionConstant)\n\n      const link = svg\n        .append('g')\n        .attr('fill', 'none')\n        .attr('stroke', '#000')\n        .selectAll('path')\n        .data(root.links())\n        .join('path')\n        .each(function(d) {\n          d.target.linkNode = this\n        })\n        .attr('d', linkConstant)\n        .attr('stroke', (d) => d.target.color)\n\n      svg\n        .append('g')\n        .selectAll('text')\n        .data(root.leaves())\n        .join('text')\n        .attr('dy', '.31em')\n        .attr(\n          'transform',\n          (d) =>\n            `rotate(${d.x - 90}) translate(${this.innerRadius + 4},0)${\n              d.x < 180 ? '' : ' rotate(180)'\n            }`\n        )\n        .attr('text-anchor', (d) => (d.x < 180 ? 'start' : 'end'))\n        .text((d) => d.data.name.replace(/_/g, ' '))\n        .on('mouseover', mouseovered(true))\n        .on('mouseout', mouseovered(false))\n\n      function update(checked) {\n        const t = d3.transition().duration(750)\n        linkExtension\n          .transition(t)\n          .attr('d', checked ? linkExtensionVariable : linkExtensionConstant)\n        link.transition(t).attr('d', checked ? linkVariable : linkConstant)\n      }\n\n      function mouseovered(active) {\n        return function(event, d) {\n          d3.select(this).classed('label--active', active)\n          d3.select(d.linkExtensionNode)\n            .classed('link-extension--active', active)\n            .raise()\n          do\n            d3.select(d.linkNode)\n              .classed('link--active', active)\n              .raise()\n          while ((d = d.parent))\n        }\n      }\n\n      return Object.assign(svg.node(), { update })\n    }\n  }\n}\n</script>\n\n<style></style>\n"]}]}